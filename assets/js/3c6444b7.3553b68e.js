"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4396],{4137:function(e,n,a){a.d(n,{Zo:function(){return s},kt:function(){return m}});var t=a(7294);function o(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function i(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function r(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?i(Object(a),!0).forEach((function(n){o(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function p(e,n){if(null==e)return{};var a,t,o=function(e,n){if(null==e)return{};var a,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||(o[a]=e[a]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=t.createContext({}),k=function(e){var n=t.useContext(l),a=n;return e&&(a="function"==typeof e?e(n):r(r({},n),e)),a},s=function(e){var n=k(e.components);return t.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},z=t.forwardRef((function(e,n){var a=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),z=k(a),m=o,c=z["".concat(l,".").concat(m)]||z[m]||d[m]||i;return a?t.createElement(c,r(r({ref:n},s),{},{components:a})):t.createElement(c,r({ref:n},s))}));function m(e,n){var a=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=a.length,r=new Array(i);r[0]=z;var p={};for(var l in n)hasOwnProperty.call(n,l)&&(p[l]=n[l]);p.originalType=e,p.mdxType="string"==typeof e?e:o,r[1]=p;for(var k=2;k<i;k++)r[k]=a[k];return t.createElement.apply(null,r)}return t.createElement.apply(null,a)}z.displayName="MDXCreateElement"},7186:function(e,n,a){a.r(n),a.d(n,{frontMatter:function(){return p},contentTitle:function(){return l},metadata:function(){return k},toc:function(){return s},default:function(){return z}});var t=a(7462),o=a(3366),i=(a(7294),a(4137)),r=["components"],p={id:"praktyka",title:"Przechodzimy do praktyki"},l=void 0,k={unversionedId:"praktyka",id:"praktyka",isDocsHomePage:!1,title:"Przechodzimy do praktyki",description:"By\u0107 mo\u017ce z rozp\u0119du czy te\u017c przyzwyczajenia przej\u015bcie od razu do cz\u0119\u015bci",source:"@site/docs/praktyka.md",sourceDirName:".",slug:"/praktyka",permalink:"/docs/praktyka",editUrl:"https://github.com/techwriterkoduje/site-source/tree/master/website/docs/praktyka.md",tags:[],version:"current",frontMatter:{id:"praktyka",title:"Przechodzimy do praktyki"},sidebar:"Docs",previous:{title:"Na pocz\u0105tek troch\u0119 teorii",permalink:"/docs/teoria"},next:{title:"Co dalej?",permalink:"/docs/co-dalej"}},s=[{value:"Co b\u0119dziemy robi\u0107?",id:"co-b\u0119dziemy-robi\u0107",children:[],level:2},{value:"Co nam b\u0119dzie potrzebne?",id:"co-nam-b\u0119dzie-potrzebne",children:[{value:"Python",id:"python",children:[],level:3},{value:"Edytor tekstowy",id:"edytor-tekstowy",children:[],level:3}],level:2},{value:"Kodowanie czas zacz\u0105\u0107",id:"kodowanie-czas-zacz\u0105\u0107",children:[{value:"Krok 1: Stw\xf3rz folder dla generatora",id:"krok-1-stw\xf3rz-folder-dla-generatora",children:[],level:3},{value:"Krok 2: Dodaj przyk\u0142adowe pliki tekstowe",id:"krok-2-dodaj-przyk\u0142adowe-pliki-tekstowe",children:[],level:3},{value:"Krok 3: Stw\xf3rz szablon dla pliku HTML",id:"krok-3-stw\xf3rz-szablon-dla-pliku-html",children:[],level:3},{value:"Krok 4: Stw\xf3rz plik dla kodu generatora",id:"krok-4-stw\xf3rz-plik-dla-kodu-generatora",children:[],level:3},{value:"Krok 5: Dodaj linki do potrzebnych komponent\xf3w Pythona",id:"krok-5-dodaj-linki-do-potrzebnych-komponent\xf3w-pythona",children:[],level:3},{value:"Krok 6: Ustaw \u015bcie\u017cki do potrzebnych zasob\xf3w",id:"krok-6-ustaw-\u015bcie\u017cki-do-potrzebnych-zasob\xf3w",children:[],level:3},{value:"Krok 7: Dodaj funkcj\u0119 do wyci\u0105gania informacji z plik\xf3w \u017ar\xf3d\u0142owych",id:"krok-7-dodaj-funkcj\u0119-do-wyci\u0105gania-informacji-z-plik\xf3w-\u017ar\xf3d\u0142owych",children:[],level:3},{value:"Krok 8: Dodaj funkcj\u0119 generuj\u0105c\u0105 wiersze tabeli",id:"krok-8-dodaj-funkcj\u0119-generuj\u0105c\u0105-wiersze-tabeli",children:[],level:3},{value:"Krok 9: Dodaj funkcj\u0119 zapisuj\u0105c\u0105 ko\u0144cowy plik HTML",id:"krok-9-dodaj-funkcj\u0119-zapisuj\u0105c\u0105-ko\u0144cowy-plik-html",children:[],level:3},{value:"Krok 10: Ostatnie szlify",id:"krok-10-ostatnie-szlify",children:[],level:3}],level:2},{value:"Gotowa aplikacja",id:"gotowa-aplikacja",children:[],level:2},{value:"Jak uruchomi\u0107 generator?",id:"jak-uruchomi\u0107-generator",children:[],level:2}],d={toc:s};function z(e){var n=e.components,a=(0,o.Z)(e,r);return(0,i.kt)("wrapper",(0,t.Z)({},d,a,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"By\u0107 mo\u017ce z rozp\u0119du czy te\u017c przyzwyczajenia przej\u015bcie od razu do cz\u0119\u015bci\npraktycznej tego przewodnika wyda\u0142o Ci si\u0119 dobrym pomys\u0142em. Je\u015bli tak si\u0119 sta\u0142o,\nto zach\u0119cam Ci\u0119 do przeczytania ",(0,i.kt)("a",{parentName:"p",href:"/docs/teoria"},"cz\u0119\u015bci teoretycznej"),", \u017ceby\ndowiedzie\u0107 si\u0119 jaki mia\u0142em cel pisz\u0105c ten przewodnik i jakie powinny by\u0107\xa0Twoje\noczekiwania w stosunku do tego co tu znajdziesz."),(0,i.kt)("h2",{id:"co-b\u0119dziemy-robi\u0107"},"Co b\u0119dziemy robi\u0107?"),(0,i.kt)("p",null,"Jak to co? Kodowa\u0107 w Pythonie! :)"),(0,i.kt)("p",null,'W \u015bwiecie dokumentacji do oprogramowania, istnieje wiele miejsc, gdzie\ntradycyjne "kopiuj-wklej" mo\u017cna potencjalnie zast\u0105pi\u0107 jakim\u015b automatycznym\nrozwi\u0105zaniem, kt\xf3re odwali za nas brudn\u0105 robot\u0119.'),(0,i.kt)("p",null,"Wyobra\u017a sobie taki scenariusz. Dostajesz przydzia\u0142 do projektu, w kt\xf3rym\nb\u0119dziesz bardzo blisko wsp\xf3\u0142pracowa\u0107 z programistami. Ustalili\u015bcie na samym\npocz\u0105tku, \u017ce za ka\u017cdym razem kiedy programista zrobi zmian\u0119 w kodzie, kt\xf3ra musi\nzosta\u0107 udokumentowana, doda do folderu ",(0,i.kt)("inlineCode",{parentName:"p"},"docs")," plik tekstowy z opisem zmian. Plik\nb\u0119dzie mia\u0142 tak\u0105 nazw\u0119 jak numer historyjki w systemie do \u015bledzenia zada\u0144. Na\nprzyk\u0142ad, je\u015bli historyjka ma numer ",(0,i.kt)("strong",{parentName:"p"},"PROJ-102")," i zosta\u0142a stworzona po to, \u017ceby\nprogramista naprawi\u0142 b\u0142\u0105d powoduj\u0105cy, \u017ce aplikacja zawiesza\u0142a si\u0119 na kilka\nsekund, a nast\u0119pnie okno aplikacji przesuwa\u0142o si\u0119 poza ekran, to programista w\nrepozytorium z kodem doda plik ",(0,i.kt)("inlineCode",{parentName:"p"},"docs\\PROJ-102.txt"),", w kt\xf3rym b\u0119dzie taka\ninformacja."),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"PROJ-102.txt")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Naprawili\u015bmy b\u0142\u0105d, kt\xf3ry powodowa\u0142, \u017ce aplikacja zawiesza\u0142a si\u0119 na kilka sekund, a nast\u0119pnie okno aplikacji przesuwa\u0142o si\u0119 poza ekran przez co stawa\u0142o si\u0119 niewidoczne.\n")),(0,i.kt)("p",null,"Co kilka tygodni zesp\xf3\u0142 publikuje now\u0105 wersj\u0119 aplikacji wraz z aktualn\u0105\ndokumentacj\u0105, kt\xf3rej cz\u0119\u015bci\u0105 s\u0105 ",(0,i.kt)("em",{parentName:"p"},"release notes")," (noty wydania). Tre\u015b\u0107, kt\xf3ra\ntrafia do ",(0,i.kt)("em",{parentName:"p"},"release notes")," pochodzi z plik\xf3w tekstowych, kt\xf3re dodaj\u0105 programi\u015bci\nkiedy zmieniaj\u0105 kod. Twoim zadaniem, jako Tech Writera, jest sprawdzanie\ninformacji w tych plikach, poprawianie ich, a na ko\u0144cu wygenerowanie pliku HTML\nz gotowymi notami. Jest to prosty plik z tabelk\u0105 przedstawiaj\u0105c\u0105 zmiany w\naplikacji. Chodzi o co\u015b takiego."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Numer zg\u0142oszenia"),(0,i.kt)("th",{parentName:"tr",align:null},"Opis"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"PROJ-102"),(0,i.kt)("td",{parentName:"tr",align:null},"Naprawili\u015bmy b\u0142\u0105d, kt\xf3ry powodowa\u0142, \u017ce aplikacja zawiesza\u0142a si\u0119 na kilka sekund, a nast\u0119pnie okno aplikacji przesuwa\u0142o si\u0119 poza ekran przez co stawa\u0142o si\u0119 niewidoczne.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"PROJ-101"),(0,i.kt)("td",{parentName:"tr",align:null},"Dodali\u015bmy now\u0105 funkcj\u0119, kt\xf3ra pozwala na szybkie pobieranie zasob\xf3w sieciowych.")))),(0,i.kt)("p",null,"Nie chcesz generowa\u0107 pliku HTML poprzez r\u0119czne przeklejanie informacji z plik\xf3w\ntekstowych i potem wprowadzanie pozosta\u0142ych poprawek, dlatego szukasz bardziej\nsprytnego rozwi\u0105zania. Chcesz sw\xf3j czas i energi\u0119 przeznaczy\u0107 g\u0142\xf3wnie na\nulepszanie informacji, kt\xf3re dostarczaj\u0105 Ci programi\u015bci, a proces publikowania\nko\u0144cowego pliku chcesz przekaza\u0107 maszynie."),(0,i.kt)("p",null,"I to w\u0142a\u015bnie b\u0119dzie nasz cel, kt\xf3ry b\u0119dziemy krok po kroku realizowa\u0107 w\nkolejnych sekcjach. Zbudujemy razem przyk\u0142adowy generator tre\u015bci, kt\xf3ry pobiera\ninformacje z plik\xf3w tekstowych, a nast\u0119pnie generuje docelowy plik HTML na\npodstawie szablonu."),(0,i.kt)("h2",{id:"co-nam-b\u0119dzie-potrzebne"},"Co nam b\u0119dzie potrzebne?"),(0,i.kt)("p",null,"Stara\u0142em si\u0119 ograniczy\u0107 liczb\u0119 potrzebnych komponent\xf3w do minimum, \u017ceby\u015bmy mogli\nprzej\u015b\u0107 jak najszybciej do kodowania. Jednak pewnych rzeczy nie da si\u0119 pomin\u0105\u0107,\ndlatego b\u0119dziesz potrzebowa\u0107 takiego oprogramowania."),(0,i.kt)("h3",{id:"python"},"Python"),(0,i.kt)("p",null,"Pythona trzeba zainstalowa\u0107. W niekt\xf3rych systemach operacyjnych, mo\u017ce ju\u017c by\u0107\nzainstalowany, ale istnieje spora szansa, \u017ce nie b\u0119dzie to wersja, kt\xf3rej\npotrzebujemy. A b\u0119dziemy potrzebowa\u0107 wersji 3.7 lub nowszej."),(0,i.kt)("p",null,"Instalatory znajdziesz na oficjalnej stronie Pythona (",(0,i.kt)("a",{parentName:"p",href:"https://www.python.org/"},"https://www.python.org/"),").\nMo\u017cesz te\u017c zainstalowa\u0107 Pythona poprzez mened\u017cera paczek w swoim systemie\noperacyjnym. Kolejn\u0105 opcj\u0105 jest u\u017cycie narz\u0119dzia pyenv\n(",(0,i.kt)("a",{parentName:"p",href:"https://github.com/pyenv/pyenv"},"https://github.com/pyenv/pyenv"),"). W przypadku Windowsa mo\u017cesz tak\u017ce skorzysta\u0107 z\ninstalacji poprzez Microsoft Store."),(0,i.kt)("p",null,"Wybierz dogodn\u0105 dla siebie metod\u0119 instalacji. Je\u015bli napotkasz jakie\u015b problemy to\nnajlepiej popro\u015b o pomoc kogo\u015b kto ma do\u015bwiadczenie z Pythonem albo poszukaj\ninformacji w internecie. Bior\u0105c pod uwag\u0119 liczb\u0119\xa0system\xf3w operacyjnych,\npotencjalna liczba problem\xf3w z instalacj\u0105 jest spora, dlatego nie by\u0142bym w\nstanie pokry\u0107\xa0w tym przewodniku ka\u017cdej mo\u017cliwej \u015bcie\u017cki."),(0,i.kt)("p",null,"Bez wzgl\u0119du na to jak\u0105 wybierzesz metod\u0119 instalacji, zwr\xf3\u0107 uwag\u0119, \u017ceby doda\u0107\nPythona do zmiennych \u015brodowiskowych, czyli przypisa\u0107 komend\u0119 ",(0,i.kt)("inlineCode",{parentName:"p"},"python")," do Pythona\n3, kt\xf3rego zainstalujesz. Robi si\u0119 to r\xf3\u017cnie w zale\u017cno\u015bci od systemu\noperacyjnego i sposobu instalacji. Na przyk\u0142ad, je\u015bli instalujesz Pythona na\nWindowsie za pomoc\u0105 instalatora pobranego z oficjalnej strony Pythona, na jednym\nz ekran\xf3w b\u0119dziesz mie\u0107 opcj\u0119, \u017ceby doda\u0107 Pythona do zmiennych \u015brodowiskowych\n(",(0,i.kt)("inlineCode",{parentName:"p"},"PATH"),")."),(0,i.kt)("h3",{id:"edytor-tekstowy"},"Edytor tekstowy"),(0,i.kt)("p",null,"Mo\u017cesz u\u017cy\u0107 jakiegokolwiek edytora tekstowego, \u017ceby kodowa\u0107 w Pythonie. Jednak\nzach\u0119cam Ci\u0119 do skorzystania z edytora, kt\xf3ry wspiera Pythona. U\u0142atwi Ci to\nznacznie \u017cycie, bo taki edytor podpowie Ci podczas pisania jakie masz opcje,\nautomatycznie sformatuje Tw\xf3j kod i da Ci zna\u0107\xa0je\u015bli co\u015b\xa0b\u0119dzie nie tak. Na\nszcz\u0119\u015bcie nie ma problemu ze znalezieniem odpowiedniego edytora, kt\xf3ry jest\ndarmowy. Nie chc\u0119 Ci narzuca\u0107 niczego, ale w momencie pisania tego przewodnika\npopularnym i darmowym edytorem, kt\xf3ry oferuje wsparcie dla Pythona jest Visual\nStudio Code od Microsoftu (",(0,i.kt)("a",{parentName:"p",href:"https://code.visualstudio.com/"},"https://code.visualstudio.com/"),"). Mo\u017ce ta opcja b\u0119dzie\ndla Ciebie odpowiednia."),(0,i.kt)("p",null,"Opr\xf3cz edytor\xf3w, mo\u017cesz skorzysta\u0107\xa0z bardziej zaawansowanej opcji, czyli IDE\n(ang. ",(0,i.kt)("em",{parentName:"p"},"integrated development environment"),"). Przyk\u0142adem mo\u017ce by\u0107\xa0PyCharm od\nJetBrains (",(0,i.kt)("a",{parentName:"p",href:"https://www.jetbrains.com/pycharm/"},"https://www.jetbrains.com/pycharm/"),"). Jednak na nasze potrzeby jest to\nza du\u017co. Nauczenie si\u0119 obs\u0142ugi IDE przyniesie Ci korzy\u015bci, ale na p\xf3\u017aniejszym\netapie nauki Pythona. Na tym etapie, polecam edytor tekstowy."),(0,i.kt)("h2",{id:"kodowanie-czas-zacz\u0105\u0107"},"Kodowanie czas zacz\u0105\u0107"),(0,i.kt)("p",null,"Mam nadziej\u0119, \u017ce instalacja Pythona i edytora nie przysporzy\u0142y Ci problem\xf3w i \u017ce\nTw\xf3j zapa\u0142 jest taki sam albo wi\u0119kszy jak w momencie rozpocz\u0119cia czytania tego\nprzewodnika. Skoro mamy ju\u017c wszystko gotowe to zabieramy si\u0119 do pracy."),(0,i.kt)("p",null,"B\u0119dziemy krok po kroku budowa\u0107 nasz\u0105 aplikacj\u0119. Pomimo tego, \u017ce ten przewodnik\njest napisany w j\u0119zyku polskim i nasze pliki tekstowe zawieraj\u0105 w sobie polski\ntekst, to nasz kod b\u0119dziemy pisa\u0107 po angielsku. By\u0107 mo\u017ce wyda Ci si\u0119 to dziwne,\nale wed\u0142ug mnie jest to bardziej naturalne i powszechne. Poza tym, dzi\u0119ki temu,\nTw\xf3j kod b\u0119dzie m\xf3g\u0142 bywa\u0107 w \u015bwiecie, bo Twoi angloj\u0119zyczni znajomi te\u017c b\u0119d\u0105 w\nstanie go zrozumie\u0107."),(0,i.kt)("p",null,"Je\u015bli chcesz od razu skoczy\u0107 na g\u0142\u0119bok\u0105 wod\u0119 albo po prostu jeste\u015b ciekaw co tu\nsi\u0119 wydarzy, przejd\u017a do sekcji ",(0,i.kt)("a",{parentName:"p",href:"#gotowa-aplikacja"},"Gotowa aplikacja"),"."),(0,i.kt)("h3",{id:"krok-1-stw\xf3rz-folder-dla-generatora"},"Krok 1: Stw\xf3rz folder dla generatora"),(0,i.kt)("p",null,"W dogodnej lokalizacji na swoim dysku, stw\xf3rz folder ",(0,i.kt)("inlineCode",{parentName:"p"},"rel_notes_generator"),". W\ntym folderze b\u0119dziemy dodawa\u0107 kolejne zasoby potrzebne nam do zbudowania\ngeneratora."),(0,i.kt)("h3",{id:"krok-2-dodaj-przyk\u0142adowe-pliki-tekstowe"},"Krok 2: Dodaj przyk\u0142adowe pliki tekstowe"),(0,i.kt)("p",null,"Stw\xf3rz folder ",(0,i.kt)("inlineCode",{parentName:"p"},"rel_notes_generator\\input"),", a w nim dodaj dwa pliki tekstowe,\n",(0,i.kt)("inlineCode",{parentName:"p"},"PROJ-101.txt")," i ",(0,i.kt)("inlineCode",{parentName:"p"},"PROJ-102.txt"),', z tak\u0105 zawarto\u015bci\u0105 jak wida\u0107 poni\u017cej. Tymi\nplikami "nakarmimy" nasz generator. Dzi\u0119ki temu b\u0119dziemy mogli sprawdzi\u0107 czy\ndzia\u0142a tak jak tego chcemy.'),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"PROJ-101.txt")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-PROJ-101.txt"},"Dodali\u015bmy now\u0105 funkcj\u0119, kt\xf3ra pozwala na szybkie pobieranie zasob\xf3w sieciowych.\n")),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"PROJ-102.txt")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-PROJ-102.txt"},"Naprawili\u015bmy b\u0142\u0105d, kt\xf3ry powodowa\u0142, \u017ce aplikacja zawiesza\u0142a si\u0119 na kilka sekund, a nast\u0119pnie okno aplikacji przesuwa\u0142o si\u0119 poza ekran przez co stawa\u0142o si\u0119 niewidoczne.\n")),(0,i.kt)("h3",{id:"krok-3-stw\xf3rz-szablon-dla-pliku-html"},"Krok 3: Stw\xf3rz szablon dla pliku HTML"),(0,i.kt)("p",null,"Mamy ju\u017c pliki tekstowe, z kt\xf3rych pobierzemy tre\u015b\u0107 naszych not wydania. Teraz\npotrzebujemy jeszcze szablonu, do kt\xf3rego wstawimy informacje pobrane z plik\xf3w\ntekstowych. Stw\xf3rz plik ",(0,i.kt)("inlineCode",{parentName:"p"},"rel_notes_generator\\release_notes_template.html")," z\ntakim kodem HTML."),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"release_notes_template.html")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8" />\n    <title>Noty wydania</title>\n  </head>\n\n  <body>\n    <table>\n      <tr>\n        <th>Numer zg\u0142oszenia</th>\n        <th>Opis</th>\n      </tr>\n      $release_notes\n    </table>\n  </body>\n</html>\n')),(0,i.kt)("p",null,"Ten prosty plik zawiera tabelk\u0119, kt\xf3ra p\xf3ki co ma tylko jeden wiersz z dwoma\nkolumnami (",(0,i.kt)("inlineCode",{parentName:"p"},"Numer zg\u0142oszenia")," i ",(0,i.kt)("inlineCode",{parentName:"p"},"Opis"),") oraz tajemniczy element\n",(0,i.kt)("inlineCode",{parentName:"p"},"$release_notes"),". Jest to element zast\u0119pczy, kt\xf3ry zostanie zamieniony przez\nnasz generator na informacje pobrane z plik\xf3w tekstowych. W kroku 5 poznasz\nkomponent Pythona, kt\xf3ry b\u0119dzie w stanie zrobi\u0107 u\u017cytek z tego elementu."),(0,i.kt)("h3",{id:"krok-4-stw\xf3rz-plik-dla-kodu-generatora"},"Krok 4: Stw\xf3rz plik dla kodu generatora"),(0,i.kt)("p",null,"Stw\xf3rz plik ",(0,i.kt)("inlineCode",{parentName:"p"},"rel_notes_generator\\rel_notes_generator.py"),". Pliki zawieraj\u0105ce kod\nPythona maj\u0105 rozszerzenie ",(0,i.kt)("inlineCode",{parentName:"p"},".py"),". W tym pliku b\u0119dzie znajdowa\u0142 si\u0119 kod dla\nnaszego generatora, kt\xf3ry napiszemy w kolejnych krokach."),(0,i.kt)("h3",{id:"krok-5-dodaj-linki-do-potrzebnych-komponent\xf3w-pythona"},"Krok 5: Dodaj linki do potrzebnych komponent\xf3w Pythona"),(0,i.kt)("p",null,"Python zawiera w sobie bogaty zestaw gotowych komponent\xf3w, z kt\xf3rych mo\u017cemy\nkorzysta\u0107 od razu bez instalowania dodatkowego oprogramowania. Ten zestaw nazywa\nsi\u0119 ",(0,i.kt)("strong",{parentName:"p"},"The Python Standard Library"),". \u017beby m\xf3c skorzysta\u0107 z jakiego\u015b komponentu\nmusimy go zaimportowa\u0107 w naszej aplikacji, czyli tak jakby doda\u0107 do niego link.\nMo\u017cemy to zrobi\u0107 wpisuj\u0105c:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"import nazwaKomponentu")),(0,i.kt)("p",null,"albo"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"from nazwaKomponentu import nazwaElementu")),(0,i.kt)("p",null,"R\xf3\u017cnica jest taka, \u017ce w pierwszym sposobie importujemy ca\u0142y komponent a w drugim\ntylko okre\u015blone elementy, kt\xf3rych akurat potrzebujemy."),(0,i.kt)("p",null,"Nasz generator b\u0119dzie korzysta\u0142 z trzech element\xf3w, kt\xf3re s\u0105 w trzech r\xf3\u017cnych\nkomponentach. Dlatego na pocz\u0105tku naszego kodu w pliku ",(0,i.kt)("inlineCode",{parentName:"p"},"rel_notes_generator.py"),"\nmusimy doda\u0107 takie linijki."),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"rel_notes_generator.py")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"from string import Template\nfrom pathlib import Path\nfrom shutil import rmtree\n")),(0,i.kt)("p",null,"Z komponentu ",(0,i.kt)("inlineCode",{parentName:"p"},"string")," importujemy element ",(0,i.kt)("inlineCode",{parentName:"p"},"Template"),", kt\xf3ry pozwala na obs\u0142ug\u0119\nszablon\xf3w. B\u0119dzie on nam potrzebny, \u017ceby odpowiednio opakowa\u0107 informacje pobrane\nz plik\xf3w tekstowych i potem je podstawi\u0107 w odpowiednie miejsce w szablonie HTML.\nJak pami\u0119tasz, w kroku 3 pojawi\u0142 si\u0119 element zast\u0119pczy ",(0,i.kt)("inlineCode",{parentName:"p"},"$release_notes"),".\nDodali\u015bmy go do naszego szablonu po to, \u017ceby komponent ",(0,i.kt)("inlineCode",{parentName:"p"},"Template")," wiedzia\u0142 gdzie\nma wstawi\u0107 w\u0142a\u015bciwe informacje."),(0,i.kt)("p",null,"Z komponentu ",(0,i.kt)("inlineCode",{parentName:"p"},"pathlib")," importujemy element ",(0,i.kt)("inlineCode",{parentName:"p"},"Path"),", dzi\u0119ki kt\xf3remu w elegancki\nspos\xf3b b\u0119dziemy mogli ustawi\u0107 w naszej aplikacji \u015bcie\u017cki do potrzebnych zasob\xf3w."),(0,i.kt)("p",null,"Z komponentu ",(0,i.kt)("inlineCode",{parentName:"p"},"shutil")," importujemy element ",(0,i.kt)("inlineCode",{parentName:"p"},"rmtree"),", kt\xf3ry pozwala na usuwanie\nfolder\xf3w, nawet je\u015bli nie s\u0105 puste."),(0,i.kt)("h3",{id:"krok-6-ustaw-\u015bcie\u017cki-do-potrzebnych-zasob\xf3w"},"Krok 6: Ustaw \u015bcie\u017cki do potrzebnych zasob\xf3w"),(0,i.kt)("p",null,"W naszym generatorze musimy ustawi\u0107 trzy \u015bcie\u017cki w taki oto spos\xf3b."),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"rel_notes_generator.py")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"current_dir = Path(__file__).parent\ninput_dir = current_dir / 'input'\noutput_dir = current_dir / 'output'\n")),(0,i.kt)("p",null,"Zanim przejd\u0119 do wyja\u015bnienia o co dok\u0142adnie tutaj chodzi, wspomn\u0119 tylko, \u017ce\nzmienne w Pythonie tworzymy poprzez przypisanie jakiej\u015b warto\u015bci do nazwy. Na\nprzyk\u0142ad, je\u015bli chcia\u0142bym stworzy\u0107 zmienn\u0105 ",(0,i.kt)("inlineCode",{parentName:"p"},"name"),", kt\xf3ra b\u0119dzie przechowywa\u0107 w\nsobie moje imi\u0119 i nazwisko, to musz\u0119 zrobi\u0107 to tak."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"name = 'Micha\u0142 Skowron'\n")),(0,i.kt)("p",null,"W Pythonie mo\u017cesz u\u017cywa\u0107 zar\xf3wno pojedynczych (",(0,i.kt)("inlineCode",{parentName:"p"},"''"),") jak i podw\xf3jnych (",(0,i.kt)("inlineCode",{parentName:"p"},'""'),")\ncudzys\u0142ow\xf3w."),(0,i.kt)("p",null,"Ale wr\xf3\u0107my do naszych \u015bcie\u017cek. Na pocz\u0105tku, ustawiamy ",(0,i.kt)("inlineCode",{parentName:"p"},"current_dir")," czyli\n\u015bcie\u017ck\u0119 do folderu, w kt\xf3rym znajduje si\u0119 nasz plik ",(0,i.kt)("inlineCode",{parentName:"p"},"rel_notes_generator.py"),".\nRobimy to za pomoc\u0105 elementu ",(0,i.kt)("inlineCode",{parentName:"p"},"__file__")," dost\u0119pnego w Pythonie. Ten element\nprzechowuje \u015bcie\u017ck\u0119 do pliku. Dodaj\u0105c ",(0,i.kt)("inlineCode",{parentName:"p"},".parent")," m\xf3wimy Pythonowi, \u017ce chcemy w\nnaszej zmiennej zapisa\u0107 nie \u015bcie\u017ck\u0119 do naszego pliku, tylko do folderu, w kt\xf3rym\nnasz plik si\u0119 znajduje."),(0,i.kt)("p",null,"Pewnie zastanawiasz si\u0119 po co jest nam to potrzebne? Jest to og\xf3lnie dobra\npraktyka. Korzystaj\u0105c z niej u\u0142atwiamy sobie \u017cycie, bo nie musimy na sztywno\nwpisywa\u0107 \u015bcie\u017cki do naszego pliku. Dzi\u0119ki temu nie ma znaczenia gdzie znajduje\nsi\u0119 nasz plik ",(0,i.kt)("inlineCode",{parentName:"p"},"rel_notes_generator.py"),", bo Python sam sobie rozwi\u0105\u017ce t\u0119 \u015bcie\u017ck\u0119.\nTa \u015bcie\u017cka jest naszym punktem wyj\u015bcia dla kolejnych \u015bcie\u017cek. Na jej podstawie\nbudujemy \u015bcie\u017ck\u0119 do folderu ",(0,i.kt)("inlineCode",{parentName:"p"},"input"),", w kt\xf3rym trzymamy pliki tekstowe i do\nfolderu ",(0,i.kt)("inlineCode",{parentName:"p"},"output"),", w kt\xf3rym zapisujemy nasz ko\u0144cowy plik HTML."),(0,i.kt)("p",null,"Mo\u017cliwe, \u017ce zastanawiasz si\u0119 teraz czy nie da\u0142oby si\u0119 tego zrobi\u0107 pro\u015bciej i\nunikn\u0105\u0107 tej szamanerii. Da\u0142oby si\u0119, ale niekoniecznie by\u0142oby to lepsze\nrozwi\u0105zanie. Gdyby\u015bmy nie skorzystali z elementu ",(0,i.kt)("inlineCode",{parentName:"p"},"__file__"),', musieliby\u015bmy\nustawi\u0107 \u015bcie\u017cki "na piechot\u0119". Wyobra\u017a sobie, \u017ce Tw\xf3j plik\n',(0,i.kt)("inlineCode",{parentName:"p"},"rel_notes_generator.py")," znajduje si\u0119 w ",(0,i.kt)("inlineCode",{parentName:"p"},"C:\\my-apps\\rel_notes_generator"),". Wi\u0119c\nustawiasz \u015bcie\u017cki na sztywno w taki spos\xf3b."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"current_dir = 'C:\\my-apps\\rel_notes_generator'\ninput_dir = current_dir + '\\' + 'input'\noutput_dir = current_dir + '\\' + 'output'\n")),(0,i.kt)("p",null,"Takie rozwi\u0105zanie na pierwszy rzut oka mo\u017ce Ci si\u0119 wydawa\u0107 ca\u0142kiem w porz\u0105dku,\nale niestety niesie ze sob\u0105 par\u0119 problem\xf3w. Generator b\u0119dzie dzia\u0142a\u0142 tylko wtedy\nje\u015bli:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Uruchomimy go na Windowsie"),(0,i.kt)("li",{parentName:"ul"},"Nasz folder projektu b\u0119dzie nazywa\u0142 si\u0119 ",(0,i.kt)("inlineCode",{parentName:"li"},"rel_notes_generator")," i b\u0119dzie\nznajdowa\u0142 si\u0119 w ",(0,i.kt)("inlineCode",{parentName:"li"},"C:\\my-apps"),".")),(0,i.kt)("p",null,"Je\u015bli zmienimy nazw\u0119 folderu projektu albo przeniesiemy go w inne miejsce, to\nnasz generator przestanie dzia\u0142a\u0107. To do\u015b\u0107 spore ograniczenia, kt\xf3rych mo\u017cemy\nunikn\u0105\u0107 stosuj\u0105c komponent ",(0,i.kt)("inlineCode",{parentName:"p"},"pathlib")," i \u015bcie\u017ck\u0119 do folderu projektu, kt\xf3ra sama\nsi\u0119 automatycznie rozwi\u0105zuje."),(0,i.kt)("h3",{id:"krok-7-dodaj-funkcj\u0119-do-wyci\u0105gania-informacji-z-plik\xf3w-\u017ar\xf3d\u0142owych"},"Krok 7: Dodaj funkcj\u0119 do wyci\u0105gania informacji z plik\xf3w \u017ar\xf3d\u0142owych"),(0,i.kt)("p",null,"Teraz dodamy nasz\u0105 pierwsz\u0105 funkcj\u0119."),(0,i.kt)("p",null,"Funkcja w kodzie to nic innego jak kawa\u0142ek kodu, kt\xf3ry wykonuje jak\u0105\u015b operacj\u0119.\nB\u0119dzie nam ona potrzebna, \u017ceby z naszych plik\xf3w tekstowych pobra\u0107 ich nazw\u0119 i\nzawarto\u015b\u0107."),(0,i.kt)("p",null,"Dodaj do pliku ",(0,i.kt)("inlineCode",{parentName:"p"},"rel_notes_generator.py")," nast\u0119puj\u0105cy kod."),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"rel_notes_generator.py")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"def get_release_notes(source_dir):\n    rel_notes = {}\n    for file in source_dir.glob('*.txt'):\n        rel_note_id = file.stem\n        with file.open() as f:\n            rel_note_text = f.read()\n        rel_notes[rel_note_id] = rel_note_text\n    return rel_notes\n")),(0,i.kt)("p",null,"W Pythonie, tworzymy funkcj\u0119 za pomoc\u0105 s\u0142owa ",(0,i.kt)("inlineCode",{parentName:"p"},"def"),". Nast\u0119pnie podajemy nazw\u0119\nfunkcji i opcjonalnie w nawiasie okre\u015blamy parametry, kt\xf3re funkcja przyjmuje."),(0,i.kt)("p",null,"W naszym wypadku funkcja nazywa si\u0119 ",(0,i.kt)("inlineCode",{parentName:"p"},"get_release_notes"),". \u017beby mog\u0142a wykona\u0107\npoprawnie swoje zadanie, musimy poda\u0107 jej \u015bcie\u017ck\u0119 do folderu, w kt\xf3rym znajduj\u0105\nsi\u0119 pliki tekstowe (",(0,i.kt)("inlineCode",{parentName:"p"},"source_dir"),")."),(0,i.kt)("p",null,"Pierwsze koty za p\u0142oty. Idziemy dalej. Nasza funkcja ma za zadanie przej\u015b\u0107 przez\nwszystkie pliki i zebra\u0107 z nich nazw\u0119 i zawarto\u015b\u0107. Zgodnie z tym co zosta\u0142o\nustalone z programistami w Twoim projekcie, nazwa pliku to numer zg\u0142oszenia, a\nzawarto\u015b\u0107 to opis wprowadzonych zmian w kodzie aplikacji. W zwi\u0105zku z tym,\nwygodnie b\u0119dzie nam zapisa\u0107 informacje zebrane przez nasz\u0105 funkcj\u0119 w formie\ns\u0142ownika (",(0,i.kt)("inlineCode",{parentName:"p"},"dict"),"), czyli takiego zbioru element\xf3w ",(0,i.kt)("inlineCode",{parentName:"p"},"klucz: warto\u015b\u0107"),". W Pythonie,\ns\u0142ownik to jeden z najwa\u017cniejszych typ\xf3w danych, kt\xf3ry jest bardzo cz\u0119sto\nu\u017cywany."),(0,i.kt)("p",null,"W naszym wypadku, taka para b\u0119dzie wygl\u0105da\u0107 tak: ",(0,i.kt)("inlineCode",{parentName:"p"},"numer zg\u0142oszenia: opis zmian"),".\nNa pocz\u0105tku dodajemy zmienn\u0105 ",(0,i.kt)("inlineCode",{parentName:"p"},"rel_notes"),", kt\xf3ra b\u0119dzie przechowywa\u0107 pusty\ns\u0142ownik (",(0,i.kt)("inlineCode",{parentName:"p"},"{}"),"). Potem ten pusty s\u0142ownik wype\u0142nimy danymi, kt\xf3re nasza funkcja\nzbierze."),(0,i.kt)("p",null,"W folderze mo\u017ce znajdowa\u0107 si\u0119 wi\u0119cej ni\u017c jeden plik tekstowy, wi\u0119c musimy zrobi\u0107\np\u0119tl\u0119, kt\xf3ra przejdzie po wszystkich plikach. Innymi s\u0142owy, m\xf3wimy Pythonowi,\n\u017ceby dla ka\u017cdego pliku (",(0,i.kt)("inlineCode",{parentName:"p"},"for file"),"), kt\xf3ry ma rozszerzenie TXT\n(",(0,i.kt)("inlineCode",{parentName:"p"},"in source_dir.glob('*.txt')"),"):"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"W zmiennej ",(0,i.kt)("inlineCode",{parentName:"li"},"rel_note_id")," zapisa\u0142 nazw\u0119 pliku (",(0,i.kt)("inlineCode",{parentName:"li"},"file.stem"),")."),(0,i.kt)("li",{parentName:"ol"},"Otworzy\u0142 plik (",(0,i.kt)("inlineCode",{parentName:"li"},"with file.open() as f"),") i w zmiennej ",(0,i.kt)("inlineCode",{parentName:"li"},"rel_note_text")," zapisa\u0142\njego zawarto\u015b\u0107, kt\xf3r\u0105 pobra\u0142 (",(0,i.kt)("inlineCode",{parentName:"li"},"f.read()"),")."),(0,i.kt)("li",{parentName:"ol"},"Do s\u0142ownika doda\u0142 par\u0119 z numerem zg\u0142oszenia i opisem zmian\n(",(0,i.kt)("inlineCode",{parentName:"li"},"rel_notes[rel_note_id] = rel_note_text"),").")),(0,i.kt)("p",null,"Kiedy p\u0119tla przejdzie po wszystkich plikach, funkcja zwr\xf3ci nam wype\u0142niony\ns\u0142ownik (",(0,i.kt)("inlineCode",{parentName:"p"},"return rel_notes"),"). W naszym testowym \u015brodowisku, funkcja zwr\xf3ci nam\ntaki s\u0142ownik:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"{'PROJ-101': 'Dodali\u015bmy now\u0105 funkcj\u0119, kt\xf3ra pozwala na szybkie pobieranie zasob\xf3w sieciowych.', 'PROJ-102': 'Naprawili\u015bmy b\u0142\u0105d, kt\xf3ry powodowa\u0142, \u017ce aplikacja zawiesza\u0142a si\u0119 na kilka sekund, a nast\u0119pnie okno aplikacji przesuwa\u0142o si\u0119 poza ekran przez co stawa\u0142o si\u0119 niewidoczne.'}\n")),(0,i.kt)("p",null,"Na tym etapie, tylko stworzyli\u015bmy now\u0105 funkcj\u0119, ale jeszcze jej nie\nuruchomili\u015bmy. To zrobimy dopiero p\xf3\u017aniej."),(0,i.kt)("h3",{id:"krok-8-dodaj-funkcj\u0119-generuj\u0105c\u0105-wiersze-tabeli"},"Krok 8: Dodaj funkcj\u0119 generuj\u0105c\u0105 wiersze tabeli"),(0,i.kt)("p",null,"W poprzednim kroku zrobili\u015bmy ca\u0142kiem sporo, ale to dopiero pocz\u0105tek. Potrzebne\nnam b\u0119d\u0105 jeszcze inne funkcje, \u017ceby nasza aplikacja zrobi\u0142a wszystko co to\nchcemy, czyli stworzy\u0142a dla nas plik HTML z notami wydania."),(0,i.kt)("p",null,"W tym kroku dodamy funkcj\u0119 i prosty szablon, kt\xf3ry pozwoli nam przerobi\u0107 s\u0142ownik\nna fragment kodu HTML. B\u0119d\u0105 to wiersze tabeli, kt\xf3re podstawimy w kolejnych\nkrokach do naszego szablonu HTML. Jak pami\u0119tasz, szablon przygotowali\u015bmy w\nkroku 3."),(0,i.kt)("p",null,"Na pocz\u0105tek, dodaj taki ma\u0142y szablon."),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"rel_notes_generator.py")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"rel_note_template = Template('''<tr>\n<td>$id</td>\n<td>$description</td>\n</tr>\n''')\n")),(0,i.kt)("p",null,"Szablon ma w sobie dwa elementy zast\u0119pcze, ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," i ",(0,i.kt)("inlineCode",{parentName:"p"},"$description"),", kt\xf3re\nb\u0119dziemy zamienia\u0107 odpowiednio na klucz i warto\u015b\u0107 ze s\u0142ownika. Potr\xf3jny\ncudzys\u0142\xf3w (",(0,i.kt)("inlineCode",{parentName:"p"},"'''")," lub ",(0,i.kt)("inlineCode",{parentName:"p"},'"""'),") s\u0142u\u017cy do tworzenia \u0142a\u0144cuch\xf3w znak\xf3w, kt\xf3re zajmuj\u0105\nwi\u0119cej ni\u017c jedn\u0105 linijk\u0119. Dla \u0142a\u0144cuch\xf3w znak\xf3w, kt\xf3re nie wykraczaj\u0105 poza jedn\u0105\nlinijk\u0119 u\u017cywa si\u0119 pojedynczego cudzys\u0142owu (",(0,i.kt)("inlineCode",{parentName:"p"},"'")," lub ",(0,i.kt)("inlineCode",{parentName:"p"},'"'),")."),(0,i.kt)("p",null,"Nast\u0119pnie dodaj kolejn\u0105 funkcj\u0119."),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"rel_notes_generator.py")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"def generate_release_notes(release_notes):\n    rel_note_table_rows = ''\n    for id, description in release_notes.items():\n        rel_note_table_rows += rel_note_template.substitute(\n            id=id, description=description)\n    return rel_note_table_rows\n")),(0,i.kt)("p",null,"Jej zadaniem b\u0119dzie przekszta\u0142cenie s\u0142ownika we fragment kodu HTML. W poprzednim\nkroku analizowali\u015bmy poszczeg\xf3lne cz\u0119\u015bci sk\u0142adowe funkcji, wi\u0119c pewnie ta\nfunkcja nie jest ju\u017c dla Ciebie wielk\u0105 niewiadom\u0105. Jednak dla porz\u0105dku przejd\u017amy\npo tym co si\u0119 tutaj dzieje."),(0,i.kt)("p",null,"Nasza funkcja o nazwie ",(0,i.kt)("inlineCode",{parentName:"p"},"generate_release_notes")," przyjmuje jako parametr s\u0142ownik\n(",(0,i.kt)("inlineCode",{parentName:"p"},"release_notes"),"), w kt\xf3rym s\u0105 pary ",(0,i.kt)("inlineCode",{parentName:"p"},"numer zg\u0142oszenia: opis zmian"),"."),(0,i.kt)("p",null,"Na pocz\u0105tku, tworzymy zmienn\u0105 ",(0,i.kt)("inlineCode",{parentName:"p"},"rel_note_table_rows"),", kt\xf3rej warto\u015b\u0107 to pusty\ntekst (",(0,i.kt)("inlineCode",{parentName:"p"},"''"),"). W tej zmiennej zapiszemy nasze wiersze tabeli HTML, kt\xf3re\nwygenerujemy za pomoc\u0105 naszego szablonu ",(0,i.kt)("inlineCode",{parentName:"p"},"rel_note_template"),"."),(0,i.kt)("p",null,"Nast\u0119pnie, m\xf3wimy Pythonowi, \u017ceby dla ka\u017cdej pary (",(0,i.kt)("inlineCode",{parentName:"p"},"for id, description"),") w\ns\u0142owniku (",(0,i.kt)("inlineCode",{parentName:"p"},"release_notes.items()"),"):"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Wzi\u0105\u0142 szablon ",(0,i.kt)("inlineCode",{parentName:"li"},"rel_note_template")," i podmieni\u0142 w nim element zast\u0119pczy ",(0,i.kt)("inlineCode",{parentName:"li"},"$id"),"\nna ",(0,i.kt)("inlineCode",{parentName:"li"},"id")," ze s\u0142ownika (czyli numer zg\u0142oszenia) i zamieni\u0142 element zast\u0119pczy\n",(0,i.kt)("inlineCode",{parentName:"li"},"$description")," na ",(0,i.kt)("inlineCode",{parentName:"li"},"description")," ze s\u0142ownika. Innymi s\u0142owy pobieramy ze\ns\u0142ownika numer zg\u0142oszenia i opis zmian i wstawiamy je do szablonu\n(",(0,i.kt)("inlineCode",{parentName:"li"},"rel_note_template.substitute(id=id, description=description)"),")."),(0,i.kt)("li",{parentName:"ol"},"Doda\u0142 wygenerowany wiersz tabeli HTML do zmiennej, kt\xf3r\u0105 stworzyli\u015bmy na\npocz\u0105tku (",(0,i.kt)("inlineCode",{parentName:"li"},"rel_note_table_rows +="),").")),(0,i.kt)("p",null,"Kiedy p\u0119tla przejdzie po wszystkich parach w s\u0142owniku, funkcja zwr\xf3ci nam\nzmienn\u0105 z gotowymi wierszami tabeli (",(0,i.kt)("inlineCode",{parentName:"p"},"return rel_note_table_rows"),"). W naszym\ntestowym \u015brodowisku, funkcja zwr\xf3ci nam taki kod:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"<tr>\n  <td>PROJ-101</td>\n  <td>\n    Dodali\u015bmy now\u0105 funkcj\u0119, kt\xf3ra pozwala na szybkie pobieranie zasob\xf3w\n    sieciowych.\n  </td>\n</tr>\n<tr>\n  <td>PROJ-102</td>\n  <td>\n    Naprawili\u015bmy b\u0142\u0105d, kt\xf3ry powodowa\u0142, \u017ce aplikacja zawiesza\u0142a si\u0119 na kilka\n    sekund, a nast\u0119pnie okno aplikacji przesuwa\u0142o si\u0119 poza ekran przez co\n    stawa\u0142o si\u0119 niewidoczne.\n  </td>\n</tr>\n")),(0,i.kt)("p",null,"Dla przypomnienia dodam, \u017ce tak jak w poprzednim kroku, tylko stworzyli\u015bmy now\u0105\nfunkcj\u0119, ale jeszcze jej nie uruchomili\u015bmy. To zrobimy dopiero p\xf3\u017aniej."),(0,i.kt)("h3",{id:"krok-9-dodaj-funkcj\u0119-zapisuj\u0105c\u0105-ko\u0144cowy-plik-html"},"Krok 9: Dodaj funkcj\u0119 zapisuj\u0105c\u0105 ko\u0144cowy plik HTML"),(0,i.kt)("p",null,"To ju\u017c ostatnia funkcja, kt\xf3rej potrzebujemy. Jej zadaniem jest podstawienie\nwierszy tabeli do szablonu pliku HTML, a nast\u0119pnie zapisanie ko\u0144cowego pliku\nHTML z notkami wydania. Dodaj taki kod do pliku ",(0,i.kt)("inlineCode",{parentName:"p"},"rel_notes_generator.py"),"."),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"rel_notes_generator.py")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"def write_release_notes(release_note_rows, target_dir):\n    if target_dir.exists():\n        rmtree(target_dir)\n    target_dir.mkdir()\n    with Path('release_notes_template.html').open() as rnt:\n        file_template = Template(rnt.read())\n    with (target_dir / 'release_notes.html').open('w') as rn:\n        rn.write(file_template.substitute(release_notes=release_note_rows))\n")),(0,i.kt)("p",null,"Na pocz\u0105tku funkcja sprawdza czy folder docelowy, w kt\xf3rym zapiszemy ko\u0144cowy\nplik ju\u017c istnieje (",(0,i.kt)("inlineCode",{parentName:"p"},"target_dir.exists()"),"). Je\u015bli tak, to najpierw go kasuje\n(",(0,i.kt)("inlineCode",{parentName:"p"},"rmtree(target_dir)"),"). Nast\u0119pnie, funkcja tworzy folder docelowy\n(",(0,i.kt)("inlineCode",{parentName:"p"},"target_dir.mkdir()"),"). Te wszystkie kroki mo\u017cemy wykona\u0107 w \u0142atwy spos\xf3b dzi\u0119ki\nkomponentom ",(0,i.kt)("inlineCode",{parentName:"p"},"pathlib")," i ",(0,i.kt)("inlineCode",{parentName:"p"},"shutil"),", kt\xf3re zaimportowali\u015bmy w kroku 5."),(0,i.kt)("p",null,"Po przygotowaniu folderu docelowego, funkcja otwiera plik szablonu HTML\n(",(0,i.kt)("inlineCode",{parentName:"p"},"with Path('release_notes_template.html').open() as rnt"),") po czym przypisuje\nzawarto\u015b\u0107 szablonu do zmiennej ",(0,i.kt)("inlineCode",{parentName:"p"},"file_template"),"\n(",(0,i.kt)("inlineCode",{parentName:"p"},"file_template = Template(rnt.read())"),")."),(0,i.kt)("p",null,"Nast\u0119pnie, funkcja tworzy pusty plik ko\u0144cowy o nazwie ",(0,i.kt)("inlineCode",{parentName:"p"},"release_notes.html"),"\n(",(0,i.kt)("inlineCode",{parentName:"p"},"with (target_dir / 'release_notes.html').open('w') as rn"),"). Ostatnia cz\u0119\u015b\u0107 to\nzamiana w szablonie HTML elementu zast\u0119pczego ",(0,i.kt)("inlineCode",{parentName:"p"},"$release_notes")," na w\u0142a\u015bciwe\nwiersze tabeli i zapisanie tego kodu HTML do pliku ko\u0144cowego\n(",(0,i.kt)("inlineCode",{parentName:"p"},"rn.write(file_template.substitute(release_notes=release_note_rows))"),")."),(0,i.kt)("p",null,"Funkcja jest do\u015b\u0107 kr\xf3tka, ale ca\u0142kiem sporo si\u0119 tutaj wydarzy\u0142o. To jest w\u0142a\u015bnie\njedna z zalet Pythona - zwi\u0119z\u0142a i czytelna sk\u0142adnia, dzi\u0119ki kt\xf3rej mo\u017cna na\nniewielkiej przestrzeni zawrze\u0107 ca\u0142kiem sporo logiki."),(0,i.kt)("p",null,"Tak jak poprzednio, na razie tylko zdefiniowali\u015bmy funkcj\u0119. Teraz musimy j\u0105\njeszcze uruchomi\u0107."),(0,i.kt)("h3",{id:"krok-10-ostatnie-szlify"},"Krok 10: Ostatnie szlify"),(0,i.kt)("p",null,"To ju\u017c ostatnia prosta. W\u0142a\u015bciwie mamy ju\u017c wszystko co nam potrzebne. Teraz\npozostaje nam uruchomi\u0107 nasze funkcje."),(0,i.kt)("p",null,"\u017beby to zrobi\u0107, dodaj taki kod."),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"rel_notes_generator.py")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"if __name__ == '__main__':\n    collected_release_notes = get_release_notes(input_dir)\n    generated_table_rows = generate_release_notes(collected_release_notes)\n    write_release_notes(generated_table_rows, output_dir)\n")),(0,i.kt)("p",null,"Pierwsza linijka, ",(0,i.kt)("inlineCode",{parentName:"p"},"if __name__ == '__main__'"),", wygl\u0105da do\u015b\u0107 enigmatycznie. W\nPythonie w taki spos\xf3b okre\u015blamy, \u017ce dany fragment kodu ma zosta\u0107 uruchomiony\ntylko je\u015bli wywo\u0142amy plik ",(0,i.kt)("inlineCode",{parentName:"p"},".py")," jako skrypt z linii komend. Dzi\u0119ki temu, ten\nfragment kodu nie zostanie wywo\u0142any je\u015bli zaimportujemy nasz plik ",(0,i.kt)("inlineCode",{parentName:"p"},".py")," do\ninnego pliku. Zapewne to wszystko brzmi do\u015b\u0107 zagadkowo, dlatego postaram si\u0119 to\nrozja\u015bni\u0107 na przyk\u0142adzie."),(0,i.kt)("p",null,"Kod naszego generatora znajduje si\u0119 w pliku ",(0,i.kt)("inlineCode",{parentName:"p"},"rel_notes_generator.py"),". W\nwi\u0119kszo\u015bci przypadk\xf3w b\u0119dziesz uruchamia\u0107 generator z linii komend jak skrypt za\npomoc\u0105 polecenia ",(0,i.kt)("inlineCode",{parentName:"p"},"python rel_notes_generator.py"),". Kiedy to zrobisz, cz\u0119\u015b\u0107 kodu,\nkt\xf3ra znajduje si\u0119 pod ",(0,i.kt)("inlineCode",{parentName:"p"},"if __name__ == '__main__'")," zostanie wykonana. Czyli\nwszystko si\u0119 zgadza, to jest w\u0142a\u015bnie to o co nam chodzi."),(0,i.kt)("p",null,"Po pewnym czasie, stworzysz kolejny generator, kt\xf3ry b\u0119dzie mia\u0142 troch\u0119 inne\nfunkcje ni\u017c generator, kt\xf3ry stworzyli\u015bmy wsp\xf3lnie. Jednak pewne cz\u0119\u015bci b\u0119d\u0105\ntakie same. \u017beby nie pisa\u0107 tego samego kodu jeszcze raz, mo\u017cesz zaimportowa\u0107\n",(0,i.kt)("inlineCode",{parentName:"p"},"rel_notes_generator.py")," do swojego nowego generatora w taki sam spos\xf3b jak\nimportowali\u015bmy komponenty w kroku 5. W tej sytuacji chcesz tylko zaimportowa\u0107\nfunkcje z generatora, ale nie chcesz, \u017ceby si\u0119 uruchomi\u0142y. O tym kiedy je\nuruchomi\u0107, zdecydujesz w odpowiedniej cz\u0119\u015bci swojego nowego generatora. I\nw\u0142a\u015bnie u\u017cycie ",(0,i.kt)("inlineCode",{parentName:"p"},"if __name__ == '__main__'"),", powoduje \u017ce funkcje si\u0119 nie\nuruchomi\u0105. Podczas importu funkcji, wszystko co znajduje si\u0119 poni\u017cej tej linijki\nnie wykona si\u0119."),(0,i.kt)("p",null,"Skoro ju\u017c wiemy po co nam ten enigmatyczny fragment kodu, zobaczmy co znajduje\nsi\u0119 pod nim. Najpierw, uruchamiamy funkcj\u0119 ",(0,i.kt)("inlineCode",{parentName:"p"},"get_release_notes")," na folderze\n",(0,i.kt)("inlineCode",{parentName:"p"},"input"),", czyli tam gdzie mamy nasze testowe pliki tekstowe. Dla przypomnienia,\nfunkcja wyci\u0105gnie nam nazwy i zawarto\u015b\u0107 plik\xf3w tekstowych. Wynik uruchomienia\nfunkcji przypisujemy do zmiennej ",(0,i.kt)("inlineCode",{parentName:"p"},"collected_release_notes"),". Nast\u0119pnie,\nuruchamiamy funkcj\u0119 ",(0,i.kt)("inlineCode",{parentName:"p"},"generate_release_notes"),", kt\xf3ra stworzy nam wiersze tabeli\nHTML z zawarto\u015bci plik\xf3w tekstowych, kt\xf3r\u0105 trzymamy w zmiennej\n",(0,i.kt)("inlineCode",{parentName:"p"},"collected_release_notes"),". Wygenerowane wiersze tabeli przypisujemy do zmiennej\n",(0,i.kt)("inlineCode",{parentName:"p"},"generated_release_notes"),". Ostatnia operacja, to uruchomienie funkcji\n",(0,i.kt)("inlineCode",{parentName:"p"},"write_release_notes"),", kt\xf3ra zapisze to co mamy w zmiennej\n",(0,i.kt)("inlineCode",{parentName:"p"},"generated_release_notes")," do ko\u0144cowego pliku HTML."),(0,i.kt)("p",null,"Nasze noty wydania s\u0105 gotowe!"),(0,i.kt)("h2",{id:"gotowa-aplikacja"},"Gotowa aplikacja"),(0,i.kt)("p",null,"Uda\u0142o si\u0119 nam przej\u015b\u0107 przez wszystkie etapy tworzenia generatora. Poni\u017cej\nkompletny kod naszej aplikacji."),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"rel_notes_generator.py")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"from string import Template\nfrom pathlib import Path\nfrom shutil import rmtree\n\ncurrent_dir = Path(__file__).parent\ninput_dir = current_dir / 'input'\noutput_dir = current_dir / 'output'\n\nrel_note_template = Template('''<tr>\n<td>$id</td>\n<td>$description</td>\n</tr>\n''')\n\n\ndef get_release_notes(source_dir):\n    rel_notes = {}\n    for file in source_dir.glob('*.txt'):\n        rel_note_id = file.stem\n        with file.open() as f:\n            rel_note_text = f.read()\n        rel_notes[rel_note_id] = rel_note_text\n    return rel_notes\n\n\ndef generate_release_notes(release_notes):\n    rel_note_table_rows = ''\n    for id, description in release_notes.items():\n        rel_note_table_rows += rel_note_template.substitute(\n            id=id, description=description)\n    return rel_note_table_rows\n\n\ndef write_release_notes(release_note_rows, target_dir):\n    if target_dir.exists():\n        rmtree(target_dir)\n    target_dir.mkdir()\n    with Path('release_notes_template.html').open() as rnt:\n        file_template = Template(rnt.read())\n    with (target_dir / 'release_notes.html').open('w') as rn:\n        rn.write(file_template.substitute(release_notes=release_note_rows))\n\nif __name__ == '__main__':\n    collected_release_notes = get_release_notes(input_dir)\n    generated_table_rows = generate_release_notes(collected_release_notes)\n    write_release_notes(generated_table_rows, output_dir)\n")),(0,i.kt)("h2",{id:"jak-uruchomi\u0107-generator"},"Jak uruchomi\u0107 generator?"),(0,i.kt)("p",null,"W kroku 10, pojawi\u0142a si\u0119 ju\u017c informacja jak wywo\u0142a\u0107 plik ",(0,i.kt)("inlineCode",{parentName:"p"},".py")," z linii komend.\nJednak dla porz\u0105dku, zamieszczam informacj\u0119 jak uruchomi\u0107 generator:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Otw\xf3rz lini\u0119 komend.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Przejd\u017a do folderu ",(0,i.kt)("inlineCode",{parentName:"p"},"rel_notes_generator"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Uruchom poni\u017csz\u0105 komend\u0119."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"python rel_notes_generator.py\n")),(0,i.kt)("p",{parentName:"li"},"W folderze ",(0,i.kt)("inlineCode",{parentName:"p"},"output")," pojawi si\u0119 plik ",(0,i.kt)("inlineCode",{parentName:"p"},"release_notes.html")," z gotowymi notami\nwydania."))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"W zale\u017cno\u015bci od tego w jaki spos\xf3b Python zosta\u0142 zainstalowany na Twoim\nkomputerze, komenda mo\u017ce si\u0119 r\xf3\u017cni\u0107. Na przyk\u0142ad, je\u015bli Python 3 nie zosta\u0142\ndodany do zmiennych \u015brodowiskowych Twojego systemu operacyjnego, mo\u017ce\nuruchomi\u0107 si\u0119 Python 2, kt\xf3ry ju\u017c wcze\u015bniej by\u0142 zainstalowany na Twoim\nkomputerze. W innym wypadku, komenda mo\u017ce w og\xf3le nie zosta\u0107 rozpoznana.\nMo\u017cesz wtedy spr\xf3bowa\u0107 u\u017cy\u0107 komendy ",(0,i.kt)("inlineCode",{parentName:"p"},"python3"),".")))}z.isMDXComponent=!0}}]);